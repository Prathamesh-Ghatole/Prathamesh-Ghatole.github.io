<!DOCTYPE html>
<html class="scroll-smooth" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>{{ site.title or 'Developer Portfolio' }}</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <script
      src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600&family=Inter:wght@300;400;500;600;800&display=swap"
      rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet" />
    <script id="tailwind-config">
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              // Mostly black & paper-white, with Toshiba red as the only accent.
              primary: "#111111",
              secondary: "#4b4b4b",
              accent: "#e83f3f", // Toshiba red
              background: "#ffffff", // normal white
              surface: "#f6f5ef", // subtle elevation over paper
              border: "#d8d6cf",
            },
            fontFamily: {
              // Headings (heavier, more UI-ish)
              display: [
                "IBM Plex Sans",
                "-apple-system",
                "BlinkMacSystemFont",
                '"Segoe UI"',
                "Roboto",
                '"Helvetica Neue"',
                "Arial",
                "sans-serif",
              ],
              // Body
              body: [
                "Inter",
                "system-ui",
                "-apple-system",
                "BlinkMacSystemFont",
                '"Segoe UI"',
                "Roboto",
                '"Helvetica Neue"',
                "Arial",
                "sans-serif",
              ],
              // UI monospace (tags, metadata)
              mono: ["SF Mono", "Consolas", "Liberation Mono", "Menlo", "monospace"],
              // Optional serif
              serif: ["Georgia", "Cambria", "Times New Roman", "Times", "serif"],
            },
            borderRadius: { DEFAULT: "0px", lg: "4px", xl: "8px", full: "9999px" },
          },
        },
      };
    </script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        color: #111111;
      }
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "IBM Plex Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
      }
      .hide-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .hide-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .hover-underline-animation {
        display: inline-block;
        position: relative;
      }
      .hover-underline-animation::after {
        content: "";
        position: absolute;
        width: 100%;
        transform: scaleX(0);
        height: 1px;
        bottom: 0;
        left: 0;
        background-color: currentColor;
        transform-origin: bottom right;
        transition: transform 0.25s ease-out;
      }
      .hover-underline-animation:hover::after {
        transform: scaleX(1);
        transform-origin: bottom left;
      }

      /* Markdown content styling (Tailwind preflight resets list styles) */
      .md-content ul {
        list-style: disc;
        padding-left: 1.25rem;
        margin: 0.75rem 0;
      }
      .md-content ol {
        list-style: decimal;
        padding-left: 1.25rem;
        margin: 0.75rem 0;
      }
      .md-content li {
        margin: 0.25rem 0;
      }
      .md-content ul ul {
        list-style: circle;
        margin-top: 0.25rem;
      }
      .md-content p {
        margin: 0.75rem 0;
      }

      /* Content links (keep consistent across prose + markdown blocks) */
      .md-content a,
      .prose a {
        color: #e83f3f;
        text-decoration: underline;
        text-underline-offset: 2px;
        text-decoration-thickness: 1px;
        overflow-wrap: anywhere;
      }
      .md-content a:hover,
      .prose a:hover {
        color: #c92f2f;
      }
      .md-content a:focus-visible,
      .prose a:focus-visible {
        outline: 2px solid #e83f3f;
        outline-offset: 2px;
      }

      /* Custom selection UI: keep native selection transparent and draw an
         overlay border (implemented with JS below). */
      ::selection {
        background: transparent;
        color: inherit;
      }
      ::-moz-selection {
        background: transparent;
        color: inherit;
      }

      /* Markdown highlight (==like this==) */
      mark.md-highlight {
        background: #e83f3f;
        color: #ffffff;
        padding: 0 0.15em;
      }

      /* Markdown accent (^^like this^^) */
      span.md-accent {
        color: #e83f3f;
      }

      /* Selection overlay rectangles */
      #selection-outline-layer {
        position: fixed;
        inset: 0;
        z-index: 9999;
        pointer-events: none;
      }
      .selection-outline-rect {
        position: absolute;
        border: 2px solid #e83f3f;
        box-sizing: border-box;
        border-radius: 2px;
      }
    </style>
  </head>
  <body class="bg-background text-primary antialiased">
    <div id="selection-outline-layer" aria-hidden="true"></div>
    {% include 'partials/header.html' %}

    <main class="flex flex-col items-center w-full pt-20">
      <section class="w-full max-w-6xl px-6 py-20 lg:px-12 lg:py-32"
        id="about">
        <div
          class="grid grid-cols-1 gap-16 lg:grid-cols-2 lg:gap-24 items-start lg:items-center">
          <div class="flex flex-col order-2 lg:order-1 pt-4 lg:pt-0">
            <div class="space-y-8 lg:space-y-10">
              <h1
                class="text-6xl sm:text-7xl lg:text-8xl font-body font-extrabold uppercase tracking-tight leading-[0.9]">
                {% for line in (site.hero_headline_lines or
                ['Crafting','digital','philosophy.']) %}
                {{ line | md_inline }}<br />
                {% endfor %}
              </h1>
              <p
                class="text-lg leading-relaxed text-secondary max-w-md font-light">
                {{ (site.hero_subtitle or
                'Full-stack engineer blending minimalist design with scalable architecture.')
                | md_inline }}
              </p>
            </div>
            <div
              class="mt-12 flex flex-wrap items-center gap-6 text-sm font-medium">
              {% for s in (site.socials or []) %}
              <a
                class="flex items-center gap-2 text-secondary hover:text-accent transition-colors hover-underline-animation pb-1"
                href="{{ s.url }}" target="_blank">
                {{ s.label }}
                <span
                  class="material-symbols-outlined text-[16px]">arrow_outward</span>
              </a>
              {% endfor %}

              {% if site.email %}
              <a
                class="flex items-center gap-2 text-secondary hover:text-accent transition-colors hover-underline-animation pb-1"
                href="mailto:{{ site.email }}">
                Email
                <span
                  class="material-symbols-outlined text-[16px]">mail</span>
              </a>
              {% endif %}
            </div>

            {% if about_html %}
            <!-- Keep About copy inside the left column so it doesn't flow under the image on desktop -->
            <div class="prose prose-neutral max-w-none mt-14">
              {{ about_html | safe }}
            </div>
            {% endif %}
          </div>

          <div
            class="relative order-1 lg:order-2 flex justify-center lg:justify-end">
            <div class="relative w-full aspect-square max-w-md">
              <div
                class="absolute inset-0 bg-gradient-to-tr from-gray-100 to-white rounded-none"></div>
              <div
                class="relative h-full w-full overflow-hidden bg-gray-50"
                data-alt="Profile portrait">
                {% if site.profile_image %}
                <div
                  class="absolute inset-0 bg-cover bg-center grayscale contrast-125"
                  style="background-image: url('{{ site.profile_image }}');"></div>
                {% else %}
                <div
                  class="absolute inset-0 bg-cover bg-center grayscale contrast-125"
                  style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBsIIQWSkzswNxJMi0uALGahJgZPizTYX_2JQqNUe-j2MH_4tDy-ewJ2017fsT4A8UNG46ixSNfzZKHQ-XXKmY2OpdIHlbatXJ8-jjrPfZASD1KM4eQ7V4nQPa8-2kcmk0v2j3jbIumZUW6zb1Ah9jM4RSHxDJLYjZ2uCR9eNg5WMIciLPzfXokp7y3GRQPGlHVrymw8QI8eaan-M5SqdnQyR4iUMBRd8b47J-sBtol5sEe5EFWmW7-PWJ2SmUSF4MBz3fZfSRnB5et');"></div>
                {% endif %}
                <div
                  class="absolute inset-0 bg-gradient-to-t from-white/20 to-transparent"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="w-full border-t border-border max-w-6xl mx-auto"></div>

      <section class="w-full max-w-6xl px-6 py-24 lg:px-12"
        id="experience">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
          <div class="lg:col-span-4">
            <h2
              class="text-3xl font-semibold tracking-tight sticky top-32">Experience
              <span class="text-accent">/</span></h2>
          </div>
          <div class="lg:col-span-8 space-y-16">
            {% for item in experience %}
            {% include 'partials/experience_item.html' %}
            {% endfor %}
          </div>
        </div>
      </section>

      <div class="w-full border-t border-border max-w-6xl mx-auto"></div>

      <section class="w-full bg-surface" id="stack">
        <div class="max-w-6xl mx-auto px-6 py-24 lg:px-12">
          <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
            <div class="lg:col-span-4">
              <h2
                class="text-3xl font-semibold tracking-tight">Technical
                Stack <span class="text-accent">/</span></h2>
            </div>
            <div class="lg:col-span-8">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                {% for item in stack %}
                {% include 'partials/stack_card.html' %}
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="w-full max-w-6xl px-6 py-24 lg:px-12"
        id="highlights">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-24">
          <div class="border-t border-border pt-8">
            <h2
              class="mb-8 text-2xl font-normal tracking-tight">Achievements</h2>
            <ul class="space-y-6">
              {% for item in achievements %}
              {% include 'partials/achievement_item.html' %}
              {% endfor %}
            </ul>
          </div>
          <div class="border-t border-border pt-8">
            <h2
              class="mb-8 text-2xl font-normal tracking-tight text-secondary">Education</h2>
            <div class="space-y-8">
              {% for item in education %}
              {% include 'partials/education_item.html' %}
              {% endfor %}
            </div>
          </div>
        </div>
      </section>

      <div class="w-full border-t border-border max-w-6xl mx-auto"></div>

      <section class="w-full max-w-6xl px-6 py-24 lg:px-12" id="projects">
        <div class="flex items-end justify-between gap-6 mb-10">
          <h2 class="text-3xl font-semibold tracking-tight">Projects
            <span class="text-accent">/</span></h2>
          <div class="text-xs font-mono text-secondary/70 hidden sm:block">
            scroll • hover to pause
          </div>
        </div>

        <div class="relative">
          <!-- Subtle fade masks on edges to hint horizontal scroll -->
          <div
            class="pointer-events-none absolute inset-y-0 left-0 w-12 bg-gradient-to-r from-background to-transparent"></div>
          <div
            class="pointer-events-none absolute inset-y-0 right-0 w-12 bg-gradient-to-l from-background to-transparent"></div>

          <div
            id="projects-carousel"
            class="flex gap-8 overflow-x-auto pb-4 hide-scrollbar snap-x snap-mandatory"
            aria-label="Projects carousel">
            {% for item in projects %}
            <div class="snap-start shrink-0 w-[85%] sm:w-[460px]">
              {% include 'partials/project_card.html' %}
            </div>
            {% endfor %}
          </div>
        </div>
      </section>

      <section
        class="w-full max-w-6xl px-6 py-24 lg:px-12 mb-20 border-t border-border"
        id="blogs">
        <h2 class="mb-16 text-3xl font-semibold tracking-tight">Blogs
          <span class="text-accent">/</span></h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          {% for item in writing %}
          {% include 'partials/writing_card.html' %}
          {% endfor %}
        </div>
      </section>
    </main>

    {% include 'partials/footer.html' %}

    <script>
      (function () {
        const layer = document.getElementById("selection-outline-layer");
        if (!layer) return;

        function clearLayer() {
          layer.innerHTML = "";
        }

        function isValidSelection(sel) {
          return sel && sel.rangeCount > 0 && !sel.isCollapsed;
        }

        function drawSelectionOutline() {
          const sel = window.getSelection();
          if (!isValidSelection(sel)) {
            clearLayer();
            return;
          }

          const range = sel.getRangeAt(0);
          const rects = Array.from(range.getClientRects());

          // Ignore tiny rects that can appear around line breaks.
          const filtered = rects.filter((r) => r.width > 1 && r.height > 1);
          if (filtered.length === 0) {
            clearLayer();
            return;
          }

          clearLayer();
          for (const r of filtered) {
            const el = document.createElement("div");
            el.className = "selection-outline-rect";
            el.style.left = `${r.left}px`;
            el.style.top = `${r.top}px`;
            el.style.width = `${r.width}px`;
            el.style.height = `${r.height}px`;
            layer.appendChild(el);
          }
        }

        // Update on selection and also on viewport changes so the outline
        // stays aligned while scrolling.
        document.addEventListener("selectionchange", drawSelectionOutline);
        window.addEventListener("scroll", drawSelectionOutline, true);
        window.addEventListener("resize", drawSelectionOutline);
        document.addEventListener("mouseup", drawSelectionOutline);
        document.addEventListener("keyup", drawSelectionOutline);

        // Clear when clicking elsewhere.
        document.addEventListener("mousedown", function () {
          // selectionchange will re-draw if user drags to select.
          clearLayer();
        });
      })();
    </script>

    <script>
      (function () {
        const scroller = document.getElementById("projects-carousel");
        if (!scroller) return;

        const prefersReduced = window.matchMedia(
          "(prefers-reduced-motion: reduce)"
        ).matches;
        if (prefersReduced) return;

        // Duplicate slides once to enable a seamless loop.
        const originalChildren = Array.from(scroller.children);
        if (originalChildren.length === 0) return;

        // Ensure layout is ready before we measure and start animating.
        window.requestAnimationFrame(() => {
          // Clone only once.
          if (!scroller.dataset.cloned) {
            for (const child of originalChildren) {
              scroller.appendChild(child.cloneNode(true));
            }
            scroller.dataset.cloned = "true";
          }

          // Use scrollWidth (more reliable than summing bounding boxes/gaps).
          const originalTotal = scroller.scrollWidth / 2;

          let paused = false;
          const speedPxPerFrame = 0.8; // slightly faster so it’s clearly visible

          // Disable snap while auto-scrolling (manual scroll still works fine).
          scroller.style.scrollSnapType = "none";

          function tick() {
            if (!paused) {
              scroller.scrollLeft += speedPxPerFrame;

              // Loop back seamlessly once we've scrolled past the original set.
              if (scroller.scrollLeft >= originalTotal) {
                scroller.scrollLeft -= originalTotal;
              }
            }
            window.requestAnimationFrame(tick);
          }

          function pause() {
            paused = true;
          }

          function resume() {
            paused = false;
          }

          scroller.addEventListener("mouseenter", pause);
          scroller.addEventListener("mouseleave", resume);
          scroller.addEventListener("focusin", pause);
          scroller.addEventListener("focusout", resume);
          scroller.addEventListener("touchstart", pause, { passive: true });
          scroller.addEventListener("touchend", resume, { passive: true });

          // Pause on wheel/trackpad interaction and resume shortly after.
          let resumeTimeout = null;
          scroller.addEventListener(
            "wheel",
            function () {
              paused = true;
              if (resumeTimeout) window.clearTimeout(resumeTimeout);
              resumeTimeout = window.setTimeout(() => {
                paused = false;
              }, 800);
            },
            { passive: true }
          );

          tick();
        });
      })();
    </script>
  </body>
</html>
